/// Show current DEADPIT Points
function	script	CurrentPoints	{
	announce "คุณมี " + F_InsertComma(deadPitPoints) + " DEADPIT Points",bc_self,0xD41212;
	return;
}

/// Current potion power
function	script	MyPotionPower	{
	return cap_value(myPotionPower,50,1000000);
}

/// Current potion cooldown
function	script	MyPotionCooldown	{
	return cap_value(10 - myPotionCooldown,1,10);
}

/// Use DEADPIT Potion
function	script	Potion	{
	.@currentTime = gettimetick(2);
	
	if(potionCooldown > .@currentTime)
	{
		message strcharinfo(0),"โปรดรอ " + (potionCooldown - .@currentTime) + " วินาที";
		end;
	}
	
	potionCooldown = .@currentTime + callfunc("MyPotionCooldown");
	
	.@potionPower = callfunc("MyPotionPower");
	
	sc_end SC_POISON;
	sc_end SC_SILENCE;
	sc_end SC_BLIND;
	sc_end SC_CONFUSION;
	sc_end SC_CURSE;
	sc_end SC_Hallucination;
	sc_end SC_BLEEDING;
	sc_end SC_ORCISH;
	sc_end SC_CHANGEUNDEAD;
	sc_end SC_HANDICAPSTATE_DEEPBLIND;
	sc_end SC_HANDICAPSTATE_DEEPSILENCE;
	sc_end SC_HANDICAPSTATE_LASSITUDE;
	sc_end SC_HANDICAPSTATE_CONFLAGRATION;
	sc_end SC_HANDICAPSTATE_MISFORTUNE;
	sc_end SC_HANDICAPSTATE_DEADLYPOISON;
	sc_end SC_HANDICAPSTATE_DEPRESSION;
	sc_end SC_HANDICAPSTATE_HOLYFLAME;
	
	heal .@potionPower,.@potionPower;
	
	specialeffect2 564;
	
	return;
}

/// Use DEADPIT Exiter
function	script	Exiter	{
	if(strcharinfo(3) == "prt_prison"){
		message strcharinfo(0),"ไม่สามารถใช้ได้ในสถานที่นี้";
		end;
	}
	
	specialeffect2 572;
	if((strcharinfo(3) == "nif_dun01")
			|| (strcharinfo(3) == "tra_fild"))
	.@instantWarp = 1;
	if(!.@instantWarp)
	progressbar "0xFBFF00",3;
	warp "nif_dun01",145,140;
	return;
}
